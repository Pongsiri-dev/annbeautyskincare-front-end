{"ast":null,"code":"var _jsxFileName = \"/Users/pongsiri.an/Documents/GitHub/Valenta-front-end/src/sections/map/MapClusters.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useRef } from 'react';\nimport MapGL, { Source, Layer } from 'react-map-gl'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst clusterLayer = {\n  id: 'clusters',\n  type: 'circle',\n  source: 'earthquakes',\n  filter: ['has', 'point_count'],\n  paint: {\n    'circle-color': ['step', ['get', 'point_count'], '#51bbd6', 100, '#f1f075', 750, '#f28cb1'],\n    'circle-radius': ['step', ['get', 'point_count'], 20, 100, 30, 750, 40]\n  }\n};\nconst clusterCountLayer = {\n  id: 'cluster-count',\n  type: 'symbol',\n  source: 'earthquakes',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': 12\n  },\n  paint: {}\n};\nconst unClusteredPointLayer = {\n  id: 'unclustered-point',\n  type: 'circle',\n  source: 'earthquakes',\n  filter: ['!', ['has', 'point_count']],\n  paint: {\n    'circle-color': '#11b4da',\n    'circle-radius': 4,\n    'circle-stroke-width': 1,\n    'circle-stroke-color': '#fff'\n  }\n}; // ----------------------------------------------------------------------\n\nexport default function MapClusters(_ref) {\n  _s();\n\n  let { ...other\n  } = _ref;\n  const mapRef = useRef(null);\n  const [viewport, setViewport] = useState({\n    latitude: 40.67,\n    longitude: -103.59,\n    zoom: 3,\n    bearing: 0,\n    pitch: 0,\n    transitionDuration: 500\n  });\n\n  const onClick = event => {\n    var _event$features, _mapRef$current;\n\n    const feature = event === null || event === void 0 ? void 0 : (_event$features = event.features) === null || _event$features === void 0 ? void 0 : _event$features[0];\n    const clusterId = feature && feature.properties.cluster_id;\n    const mapboxSource = (_mapRef$current = mapRef.current) === null || _mapRef$current === void 0 ? void 0 : _mapRef$current.getMap().getSource('earthquakes');\n    mapboxSource.getClusterExpansionZoom(clusterId, (err, zoom) => {\n      if (err) {\n        return;\n      }\n\n      setViewport({ ...viewport,\n        longitude: feature && feature.geometry.coordinates[0],\n        latitude: feature && feature.geometry.coordinates[1],\n        zoom: isNaN(zoom) ? 3 : zoom,\n        transitionDuration: 500\n      });\n    });\n  };\n\n  const interactiveLayerIds = clusterLayer.id ? [clusterLayer.id] : undefined;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(MapGL, { ...viewport,\n      onViewportChange: setViewport,\n      interactiveLayerIds: interactiveLayerIds,\n      onClick: onClick,\n      ref: mapRef,\n      ...other,\n      children: /*#__PURE__*/_jsxDEV(Source, {\n        id: \"earthquakes\",\n        type: \"geojson\",\n        data: \"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson\",\n        cluster: true,\n        clusterMaxZoom: 14,\n        clusterRadius: 50,\n        children: [/*#__PURE__*/_jsxDEV(Layer, { ...clusterLayer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Layer, { ...clusterCountLayer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Layer, { ...unClusteredPointLayer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(MapClusters, \"Czy3Zazo6vyT3ONBQFLDSC+rWIE=\");\n\n_c = MapClusters;\n\nvar _c;\n\n$RefreshReg$(_c, \"MapClusters\");","map":{"version":3,"sources":["/Users/pongsiri.an/Documents/GitHub/Valenta-front-end/src/sections/map/MapClusters.tsx"],"names":["useState","useRef","MapGL","Source","Layer","clusterLayer","id","type","source","filter","paint","clusterCountLayer","layout","unClusteredPointLayer","MapClusters","other","mapRef","viewport","setViewport","latitude","longitude","zoom","bearing","pitch","transitionDuration","onClick","event","feature","features","clusterId","properties","cluster_id","mapboxSource","current","getMap","getSource","getClusterExpansionZoom","err","geometry","coordinates","isNaN","interactiveLayerIds","undefined"],"mappings":"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","sourcesContent":["import { useState, useRef } from 'react';\nimport MapGL, { Source, Layer, MapEvent, MapRef, LayerProps } from 'react-map-gl';\n\n// ----------------------------------------------------------------------\n\nconst clusterLayer: LayerProps = {\n  id: 'clusters',\n  type: 'circle',\n  source: 'earthquakes',\n  filter: ['has', 'point_count'],\n  paint: {\n    'circle-color': ['step', ['get', 'point_count'], '#51bbd6', 100, '#f1f075', 750, '#f28cb1'],\n    'circle-radius': ['step', ['get', 'point_count'], 20, 100, 30, 750, 40]\n  }\n};\n\nconst clusterCountLayer: LayerProps = {\n  id: 'cluster-count',\n  type: 'symbol',\n  source: 'earthquakes',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': 12\n  },\n  paint: {}\n};\n\nconst unClusteredPointLayer: LayerProps = {\n  id: 'unclustered-point',\n  type: 'circle',\n  source: 'earthquakes',\n  filter: ['!', ['has', 'point_count']],\n  paint: {\n    'circle-color': '#11b4da',\n    'circle-radius': 4,\n    'circle-stroke-width': 1,\n    'circle-stroke-color': '#fff'\n  }\n};\n\n// ----------------------------------------------------------------------\n\nexport default function MapClusters({ ...other }) {\n  const mapRef = useRef<MapRef>(null);\n  const [viewport, setViewport] = useState({\n    latitude: 40.67,\n    longitude: -103.59,\n    zoom: 3,\n    bearing: 0,\n    pitch: 0,\n    transitionDuration: 500\n  });\n\n  const onClick = (event: MapEvent) => {\n    const feature = event?.features?.[0];\n    const clusterId = feature && feature.properties.cluster_id;\n    const mapboxSource = mapRef.current?.getMap().getSource('earthquakes');\n\n    mapboxSource.getClusterExpansionZoom(clusterId, (err: any, zoom: number) => {\n      if (err) {\n        return;\n      }\n      setViewport({\n        ...viewport,\n        longitude: feature && feature.geometry.coordinates[0],\n        latitude: feature && feature.geometry.coordinates[1],\n        zoom: isNaN(zoom) ? 3 : zoom,\n        transitionDuration: 500\n      });\n    });\n  };\n\n  const interactiveLayerIds = clusterLayer.id ? [clusterLayer.id] : undefined;\n\n  return (\n    <>\n      <MapGL\n        {...viewport}\n        onViewportChange={setViewport}\n        interactiveLayerIds={interactiveLayerIds}\n        onClick={onClick}\n        ref={mapRef}\n        {...other}\n      >\n        <Source\n          id=\"earthquakes\"\n          type=\"geojson\"\n          data=\"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson\"\n          cluster={true}\n          clusterMaxZoom={14}\n          clusterRadius={50}\n        >\n          <Layer {...clusterLayer} />\n          <Layer {...clusterCountLayer} />\n          <Layer {...unClusteredPointLayer} />\n        </Source>\n      </MapGL>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}