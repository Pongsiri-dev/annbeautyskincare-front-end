{"ast":null,"code":"var _jsxFileName = \"/Users/pongsiri.an/Documents/GitHub/Valenta-front-end/src/sections/@dashboard/kanban/KanbanColumn.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useSnackbar } from 'notistack';\nimport { useSelector } from 'react-redux';\nimport { Droppable, Draggable } from 'react-beautiful-dnd'; // @mui\n\nimport { Paper, Stack, Button } from '@mui/material'; // redux\n\nimport { useDispatch } from '../../../redux/store';\nimport { deleteColumn, updateColumn, addTask, deleteTask } from '../../../redux/slices/kanban'; // @types\n\n// components\nimport Iconify from '../../../components/Iconify'; //\n\nimport KanbanAddTask from './KanbanTaskAdd';\nimport KanbanTaskCard from './KanbanTaskCard';\nimport KanbanColumnToolBar from './KanbanColumnToolBar'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function KanbanColumn(_ref) {\n  _s();\n\n  let {\n    column,\n    index\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    board\n  } = useSelector(state => state.kanban);\n  const [open, setOpen] = useState(false);\n  const {\n    name,\n    cardIds,\n    id\n  } = column;\n\n  const handleOpenAddTask = () => {\n    setOpen(prev => !prev);\n  };\n\n  const handleCloseAddTask = () => {\n    setOpen(false);\n  };\n\n  const handleDeleteTask = cardId => {\n    dispatch(deleteTask({\n      cardId,\n      columnId: id\n    }));\n    enqueueSnackbar('Delete success', {\n      variant: 'success'\n    });\n  };\n\n  const handleUpdateColumn = async newName => {\n    try {\n      if (newName !== name) {\n        dispatch(updateColumn(id, { ...column,\n          name: newName\n        }));\n        enqueueSnackbar('Update success', {\n          variant: 'success'\n        });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleDeleteColumn = async () => {\n    try {\n      dispatch(deleteColumn(id));\n      enqueueSnackbar('Delete success', {\n        variant: 'success'\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleAddTask = task => {\n    dispatch(addTask({\n      card: task,\n      columnId: id\n    }));\n    enqueueSnackbar('Add success', {\n      variant: 'success'\n    });\n    handleCloseAddTask();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Draggable, {\n    draggableId: id,\n    index: index,\n    children: provided => /*#__PURE__*/_jsxDEV(Paper, { ...provided.draggableProps,\n      ref: provided.innerRef,\n      variant: \"outlined\",\n      sx: {\n        px: 2,\n        bgcolor: 'grey.5008'\n      },\n      children: /*#__PURE__*/_jsxDEV(Stack, {\n        spacing: 3,\n        ...provided.dragHandleProps,\n        children: [/*#__PURE__*/_jsxDEV(KanbanColumnToolBar, {\n          columnName: name,\n          onDelete: handleDeleteColumn,\n          onUpdate: handleUpdateColumn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Droppable, {\n          droppableId: id,\n          type: \"task\",\n          children: provided => /*#__PURE__*/_jsxDEV(Stack, {\n            ref: provided.innerRef,\n            ...provided.droppableProps,\n            spacing: 2,\n            width: 280,\n            children: [cardIds.map((cardId, index) => /*#__PURE__*/_jsxDEV(KanbanTaskCard, {\n              onDeleteTask: handleDeleteTask,\n              card: board === null || board === void 0 ? void 0 : board.cards[cardId],\n              index: index\n            }, cardId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 21\n            }, this)), provided.placeholder]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Stack, {\n          spacing: 2,\n          sx: {\n            pb: 3\n          },\n          children: [open && /*#__PURE__*/_jsxDEV(KanbanAddTask, {\n            onAddTask: handleAddTask,\n            onCloseAddTask: handleCloseAddTask\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            fullWidth: true,\n            size: \"large\",\n            color: \"inherit\",\n            startIcon: /*#__PURE__*/_jsxDEV(Iconify, {\n              icon: 'eva:plus-fill',\n              width: 20,\n              height: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 28\n            }, this),\n            onClick: handleOpenAddTask,\n            sx: {\n              fontSize: 14\n            },\n            children: \"Add Task\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(KanbanColumn, \"+4/0KZFzHdQaHwQGhkVgkWAuXKI=\", false, function () {\n  return [useDispatch, useSnackbar, useSelector];\n});\n\n_c = KanbanColumn;\n\nvar _c;\n\n$RefreshReg$(_c, \"KanbanColumn\");","map":{"version":3,"sources":["/Users/pongsiri.an/Documents/GitHub/Valenta-front-end/src/sections/@dashboard/kanban/KanbanColumn.tsx"],"names":["useState","useSnackbar","useSelector","Droppable","Draggable","Paper","Stack","Button","useDispatch","deleteColumn","updateColumn","addTask","deleteTask","Iconify","KanbanAddTask","KanbanTaskCard","KanbanColumnToolBar","KanbanColumn","column","index","dispatch","enqueueSnackbar","board","state","kanban","open","setOpen","name","cardIds","id","handleOpenAddTask","prev","handleCloseAddTask","handleDeleteTask","cardId","columnId","variant","handleUpdateColumn","newName","error","console","handleDeleteColumn","handleAddTask","task","card","provided","draggableProps","innerRef","px","bgcolor","dragHandleProps","droppableProps","map","cards","placeholder","pb","fontSize"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,WAAT,QAA4B,WAA5B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,qBAArC,C,CACA;;AACA,SAASC,KAAT,EAAgBC,KAAhB,EAAuBC,MAAvB,QAAqC,eAArC,C,CACA;;AACA,SAAoBC,WAApB,QAAuC,sBAAvC;AACA,SAASC,YAAT,EAAuBC,YAAvB,EAAqCC,OAArC,EAA8CC,UAA9C,QAAgE,8BAAhE,C,CACA;;AAEA;AACA,OAAOC,OAAP,MAAoB,6BAApB,C,CACA;;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,mBAAP,MAAgC,uBAAhC,C,CAEA;;;AAOA,eAAe,SAASC,YAAT,OAAgD;AAAA;;AAAA,MAA1B;AAAEC,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GAA0B;AAC7D,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AAEA,QAAM;AAAEa,IAAAA;AAAF,MAAsBpB,WAAW,EAAvC;AAEA,QAAM;AAAEqB,IAAAA;AAAF,MAAYpB,WAAW,CAAEqB,KAAD,IAAsBA,KAAK,CAACC,MAA7B,CAA7B;AAEA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkB1B,QAAQ,CAAC,KAAD,CAAhC;AAEA,QAAM;AAAE2B,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA;AAAjB,MAAwBX,MAA9B;;AAEA,QAAMY,iBAAiB,GAAG,MAAM;AAC9BJ,IAAAA,OAAO,CAAEK,IAAD,IAAU,CAACA,IAAZ,CAAP;AACD,GAFD;;AAIA,QAAMC,kBAAkB,GAAG,MAAM;AAC/BN,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIA,QAAMO,gBAAgB,GAAIC,MAAD,IAAoB;AAC3Cd,IAAAA,QAAQ,CAACR,UAAU,CAAC;AAAEsB,MAAAA,MAAF;AAAUC,MAAAA,QAAQ,EAAEN;AAApB,KAAD,CAAX,CAAR;AACAR,IAAAA,eAAe,CAAC,gBAAD,EAAmB;AAAEe,MAAAA,OAAO,EAAE;AAAX,KAAnB,CAAf;AACD,GAHD;;AAKA,QAAMC,kBAAkB,GAAG,MAAOC,OAAP,IAA2B;AACpD,QAAI;AACF,UAAIA,OAAO,KAAKX,IAAhB,EAAsB;AACpBP,QAAAA,QAAQ,CAACV,YAAY,CAACmB,EAAD,EAAK,EAAE,GAAGX,MAAL;AAAaS,UAAAA,IAAI,EAAEW;AAAnB,SAAL,CAAb,CAAR;AACAjB,QAAAA,eAAe,CAAC,gBAAD,EAAmB;AAAEe,UAAAA,OAAO,EAAE;AAAX,SAAnB,CAAf;AACD;AACF,KALD,CAKE,OAAOG,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD;AACF,GATD;;AAWA,QAAME,kBAAkB,GAAG,YAAY;AACrC,QAAI;AACFrB,MAAAA,QAAQ,CAACX,YAAY,CAACoB,EAAD,CAAb,CAAR;AACAR,MAAAA,eAAe,CAAC,gBAAD,EAAmB;AAAEe,QAAAA,OAAO,EAAE;AAAX,OAAnB,CAAf;AACD,KAHD,CAGE,OAAOG,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD;AACF,GAPD;;AASA,QAAMG,aAAa,GAAIC,IAAD,IAAe;AACnCvB,IAAAA,QAAQ,CAACT,OAAO,CAAC;AAAEiC,MAAAA,IAAI,EAAED,IAAR;AAAcR,MAAAA,QAAQ,EAAEN;AAAxB,KAAD,CAAR,CAAR;AACAR,IAAAA,eAAe,CAAC,aAAD,EAAgB;AAAEe,MAAAA,OAAO,EAAE;AAAX,KAAhB,CAAf;AACAJ,IAAAA,kBAAkB;AACnB,GAJD;;AAMA,sBACE,QAAC,SAAD;AAAW,IAAA,WAAW,EAAEH,EAAxB;AAA4B,IAAA,KAAK,EAAEV,KAAnC;AAAA,cACI0B,QAAD,iBACC,QAAC,KAAD,OACMA,QAAQ,CAACC,cADf;AAEE,MAAA,GAAG,EAAED,QAAQ,CAACE,QAFhB;AAGE,MAAA,OAAO,EAAC,UAHV;AAIE,MAAA,EAAE,EAAE;AAAEC,QAAAA,EAAE,EAAE,CAAN;AAASC,QAAAA,OAAO,EAAE;AAAlB,OAJN;AAAA,6BAME,QAAC,KAAD;AAAO,QAAA,OAAO,EAAE,CAAhB;AAAA,WAAuBJ,QAAQ,CAACK,eAAhC;AAAA,gCACE,QAAC,mBAAD;AACE,UAAA,UAAU,EAAEvB,IADd;AAEE,UAAA,QAAQ,EAAEc,kBAFZ;AAGE,UAAA,QAAQ,EAAEJ;AAHZ;AAAA;AAAA;AAAA;AAAA,gBADF,eAOE,QAAC,SAAD;AAAW,UAAA,WAAW,EAAER,EAAxB;AAA4B,UAAA,IAAI,EAAC,MAAjC;AAAA,oBACIgB,QAAD,iBACC,QAAC,KAAD;AAAO,YAAA,GAAG,EAAEA,QAAQ,CAACE,QAArB;AAAA,eAAmCF,QAAQ,CAACM,cAA5C;AAA4D,YAAA,OAAO,EAAE,CAArE;AAAwE,YAAA,KAAK,EAAE,GAA/E;AAAA,uBACGvB,OAAO,CAACwB,GAAR,CAAY,CAAClB,MAAD,EAASf,KAAT,kBACX,QAAC,cAAD;AAEE,cAAA,YAAY,EAAEc,gBAFhB;AAGE,cAAA,IAAI,EAAEX,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAE+B,KAAP,CAAanB,MAAb,CAHR;AAIE,cAAA,KAAK,EAAEf;AAJT,eACOe,MADP;AAAA;AAAA;AAAA;AAAA,oBADD,CADH,EASGW,QAAQ,CAACS,WATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,gBAPF,eAuBE,QAAC,KAAD;AAAO,UAAA,OAAO,EAAE,CAAhB;AAAmB,UAAA,EAAE,EAAE;AAAEC,YAAAA,EAAE,EAAE;AAAN,WAAvB;AAAA,qBACG9B,IAAI,iBACH,QAAC,aAAD;AAAe,YAAA,SAAS,EAAEiB,aAA1B;AAAyC,YAAA,cAAc,EAAEV;AAAzD;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAKE,QAAC,MAAD;AACE,YAAA,SAAS,MADX;AAEE,YAAA,IAAI,EAAC,OAFP;AAGE,YAAA,KAAK,EAAC,SAHR;AAIE,YAAA,SAAS,eAAE,QAAC,OAAD;AAAS,cAAA,IAAI,EAAE,eAAf;AAAgC,cAAA,KAAK,EAAE,EAAvC;AAA2C,cAAA,MAAM,EAAE;AAAnD;AAAA;AAAA;AAAA;AAAA,oBAJb;AAKE,YAAA,OAAO,EAAEF,iBALX;AAME,YAAA,EAAE,EAAE;AAAE0B,cAAAA,QAAQ,EAAE;AAAZ,aANN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAvBF;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,UADF;AAqDD;;GAvGuBvC,Y;UACLT,W,EAEWP,W,EAEVC,W;;;KALIe,Y","sourcesContent":["import { useState } from 'react';\nimport { useSnackbar } from 'notistack';\nimport { useSelector } from 'react-redux';\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\n// @mui\nimport { Paper, Stack, Button } from '@mui/material';\n// redux\nimport { RootState, useDispatch } from '../../../redux/store';\nimport { deleteColumn, updateColumn, addTask, deleteTask } from '../../../redux/slices/kanban';\n// @types\nimport { KanbanColumn as Column } from '../../../@types/kanban';\n// components\nimport Iconify from '../../../components/Iconify';\n//\nimport KanbanAddTask from './KanbanTaskAdd';\nimport KanbanTaskCard from './KanbanTaskCard';\nimport KanbanColumnToolBar from './KanbanColumnToolBar';\n\n// ----------------------------------------------------------------------\n\ntype Props = {\n  column: Column;\n  index: number;\n};\n\nexport default function KanbanColumn({ column, index }: Props) {\n  const dispatch = useDispatch();\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const { board } = useSelector((state: RootState) => state.kanban);\n\n  const [open, setOpen] = useState(false);\n\n  const { name, cardIds, id } = column;\n\n  const handleOpenAddTask = () => {\n    setOpen((prev) => !prev);\n  };\n\n  const handleCloseAddTask = () => {\n    setOpen(false);\n  };\n\n  const handleDeleteTask = (cardId: string) => {\n    dispatch(deleteTask({ cardId, columnId: id }));\n    enqueueSnackbar('Delete success', { variant: 'success' });\n  };\n\n  const handleUpdateColumn = async (newName: string) => {\n    try {\n      if (newName !== name) {\n        dispatch(updateColumn(id, { ...column, name: newName }));\n        enqueueSnackbar('Update success', { variant: 'success' });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleDeleteColumn = async () => {\n    try {\n      dispatch(deleteColumn(id));\n      enqueueSnackbar('Delete success', { variant: 'success' });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleAddTask = (task: any) => {\n    dispatch(addTask({ card: task, columnId: id }));\n    enqueueSnackbar('Add success', { variant: 'success' });\n    handleCloseAddTask();\n  };\n\n  return (\n    <Draggable draggableId={id} index={index}>\n      {(provided) => (\n        <Paper\n          {...provided.draggableProps}\n          ref={provided.innerRef}\n          variant=\"outlined\"\n          sx={{ px: 2, bgcolor: 'grey.5008' }}\n        >\n          <Stack spacing={3} {...provided.dragHandleProps}>\n            <KanbanColumnToolBar\n              columnName={name}\n              onDelete={handleDeleteColumn}\n              onUpdate={handleUpdateColumn}\n            />\n\n            <Droppable droppableId={id} type=\"task\">\n              {(provided) => (\n                <Stack ref={provided.innerRef} {...provided.droppableProps} spacing={2} width={280}>\n                  {cardIds.map((cardId, index) => (\n                    <KanbanTaskCard\n                      key={cardId}\n                      onDeleteTask={handleDeleteTask}\n                      card={board?.cards[cardId]}\n                      index={index}\n                    />\n                  ))}\n                  {provided.placeholder}\n                </Stack>\n              )}\n            </Droppable>\n\n            <Stack spacing={2} sx={{ pb: 3 }}>\n              {open && (\n                <KanbanAddTask onAddTask={handleAddTask} onCloseAddTask={handleCloseAddTask} />\n              )}\n\n              <Button\n                fullWidth\n                size=\"large\"\n                color=\"inherit\"\n                startIcon={<Iconify icon={'eva:plus-fill'} width={20} height={20} />}\n                onClick={handleOpenAddTask}\n                sx={{ fontSize: 14 }}\n              >\n                Add Task\n              </Button>\n            </Stack>\n          </Stack>\n        </Paper>\n      )}\n    </Draggable>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}