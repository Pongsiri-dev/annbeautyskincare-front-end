{"ast":null,"code":"var _jsxFileName = \"/Users/pongsiri.an/Documents/GitHub/Valenta-front-end/src/sections/@dashboard/kanban/KanbanTaskAdd.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { trim } from 'lodash';\nimport { v4 as uuidv4 } from 'uuid';\nimport { format, isSameDay, isSameMonth } from 'date-fns';\nimport { useState } from 'react'; // @mui\n\nimport { Box, Paper, Stack, Tooltip, Checkbox, IconButton, OutlinedInput, ClickAwayListener } from '@mui/material';\nimport { MobileDateRangePicker } from '@mui/lab'; // @types\n\n// components\nimport Iconify from '../../../components/Iconify'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst defaultTask = {\n  attachments: [],\n  comments: [],\n  description: '',\n  due: [null, null],\n  assignee: []\n};\nexport default function KanbanTaskAdd(_ref) {\n  _s();\n\n  let {\n    onAddTask,\n    onCloseAddTask\n  } = _ref;\n  const [name, setName] = useState('');\n  const [completed, setCompleted] = useState(false);\n  const {\n    dueDate,\n    startTime,\n    endTime,\n    isSameDays,\n    isSameMonths,\n    onChangeDueDate,\n    openPicker,\n    onOpenPicker,\n    onClosePicker\n  } = useDatePicker({\n    date: [null, null]\n  });\n\n  const handleKeyUpAddTask = event => {\n    if (event.key === 'Enter') {\n      if (trim(name) !== '') {\n        onAddTask({ ...defaultTask,\n          id: uuidv4(),\n          name,\n          due: dueDate,\n          completed\n        });\n      }\n    }\n  };\n\n  const handleClickAddTask = () => {\n    if (name) {\n      onAddTask({ ...defaultTask,\n        id: uuidv4(),\n        name,\n        due: dueDate,\n        completed\n      });\n    }\n\n    onCloseAddTask();\n  };\n\n  const handleChangeCompleted = event => {\n    setCompleted(event.target.checked);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n      onClickAway: handleClickAddTask,\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        variant: \"outlined\",\n        sx: {\n          p: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(OutlinedInput, {\n          multiline: true,\n          size: \"small\",\n          placeholder: \"Task name\",\n          value: name,\n          onChange: event => setName(event.target.value),\n          onKeyUp: handleKeyUpAddTask,\n          sx: {\n            '& input': {\n              p: 0\n            },\n            '& fieldset': {\n              borderColor: 'transparent !important'\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Stack, {\n          direction: \"row\",\n          justifyContent: \"space-between\",\n          children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Mark task complete\",\n            children: /*#__PURE__*/_jsxDEV(Checkbox, {\n              disableRipple: true,\n              checked: completed,\n              onChange: handleChangeCompleted,\n              icon: /*#__PURE__*/_jsxDEV(Iconify, {\n                icon: 'eva:radio-button-off-outline'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 23\n              }, this),\n              checkedIcon: /*#__PURE__*/_jsxDEV(Iconify, {\n                icon: 'eva:checkmark-circle-2-outline'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 30\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Stack, {\n            direction: \"row\",\n            spacing: 1.5,\n            alignItems: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Assign this task\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                children: /*#__PURE__*/_jsxDEV(Iconify, {\n                  icon: 'eva:people-fill',\n                  width: 20,\n                  height: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), startTime && endTime ? /*#__PURE__*/_jsxDEV(DisplayTime, {\n              startTime: startTime,\n              endTime: endTime,\n              isSameDays: isSameDays,\n              isSameMonths: isSameMonths,\n              onOpenPicker: onOpenPicker\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Add due date\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: onOpenPicker,\n                children: /*#__PURE__*/_jsxDEV(Iconify, {\n                  icon: 'eva:calendar-fill',\n                  width: 20,\n                  height: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(MobileDateRangePicker, {\n              open: openPicker,\n              onClose: onClosePicker,\n              onOpen: onOpenPicker,\n              value: dueDate,\n              onChange: onChangeDueDate // @ts-ignore\n              ,\n              renderInput: () => {}\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n} // ----------------------------------------------------------------------\n\n_s(KanbanTaskAdd, \"9l5yR8QoAW1iGvwJvIzr332drc4=\", false, function () {\n  return [useDatePicker];\n});\n\n_c = KanbanTaskAdd;\nexport function useDatePicker(_ref2) {\n  _s2();\n\n  let {\n    date\n  } = _ref2;\n  const [dueDate, setDueDate] = useState([date[0], date[1]]);\n  const [openPicker, setOpenPicker] = useState(false);\n  const startTime = dueDate[0] || '';\n  const endTime = dueDate[1] || '';\n  const isSameDays = isSameDay(new Date(startTime), new Date(endTime));\n  const isSameMonths = isSameMonth(new Date(startTime), new Date(endTime));\n\n  const handleChangeDueDate = newValue => {\n    setDueDate(newValue);\n  };\n\n  const handleOpenPicker = () => {\n    setOpenPicker(true);\n  };\n\n  const handleClosePicker = () => {\n    setOpenPicker(false);\n  };\n\n  return {\n    dueDate,\n    startTime,\n    endTime,\n    isSameDays,\n    isSameMonths,\n    onChangeDueDate: handleChangeDueDate,\n    openPicker,\n    onOpenPicker: handleOpenPicker,\n    onClosePicker: handleClosePicker\n  };\n}\n\n_s2(useDatePicker, \"Zl+d8nj2y1+/vDCK84V/rFeoyvY=\");\n\nexport function DisplayTime(_ref3) {\n  let {\n    startTime,\n    endTime,\n    isSameDays,\n    isSameMonths,\n    onOpenPicker,\n    sx\n  } = _ref3;\n  const style = {\n    typography: 'caption',\n    cursor: 'pointer',\n    '&:hover': {\n      opacity: 0.72\n    }\n  };\n\n  if (isSameMonths) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      onClick: onOpenPicker,\n      sx: { ...style,\n        ...sx\n      },\n      children: isSameDays ? format(new Date(endTime), 'dd MMM') : `${format(new Date(startTime), 'dd')} - ${format(new Date(endTime), 'dd MMM')}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    onClick: onOpenPicker,\n    sx: { ...style,\n      ...sx\n    },\n    children: [format(new Date(startTime), 'dd MMM'), \" - \", format(new Date(endTime), 'dd MMM')]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n}\n_c2 = DisplayTime;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"KanbanTaskAdd\");\n$RefreshReg$(_c2, \"DisplayTime\");","map":{"version":3,"sources":["/Users/pongsiri.an/Documents/GitHub/Valenta-front-end/src/sections/@dashboard/kanban/KanbanTaskAdd.tsx"],"names":["trim","v4","uuidv4","format","isSameDay","isSameMonth","useState","Box","Paper","Stack","Tooltip","Checkbox","IconButton","OutlinedInput","ClickAwayListener","MobileDateRangePicker","Iconify","defaultTask","attachments","comments","description","due","assignee","KanbanTaskAdd","onAddTask","onCloseAddTask","name","setName","completed","setCompleted","dueDate","startTime","endTime","isSameDays","isSameMonths","onChangeDueDate","openPicker","onOpenPicker","onClosePicker","useDatePicker","date","handleKeyUpAddTask","event","key","id","handleClickAddTask","handleChangeCompleted","target","checked","p","value","borderColor","setDueDate","setOpenPicker","Date","handleChangeDueDate","newValue","handleOpenPicker","handleClosePicker","DisplayTime","sx","style","typography","cursor","opacity"],"mappings":"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","sourcesContent":["import { trim } from 'lodash';\nimport { v4 as uuidv4 } from 'uuid';\nimport { format, isSameDay, isSameMonth } from 'date-fns';\nimport { ChangeEvent, KeyboardEvent, useState } from 'react';\n// @mui\nimport {\n  Box,\n  Paper,\n  Stack,\n  Tooltip,\n  Checkbox,\n  IconButton,\n  OutlinedInput,\n  ClickAwayListener,\n  SxProps,\n} from '@mui/material';\nimport { MobileDateRangePicker } from '@mui/lab';\n// @types\nimport { KanbanCard } from '../../../@types/kanban';\n// components\nimport Iconify from '../../../components/Iconify';\n\n// ----------------------------------------------------------------------\n\nconst defaultTask = {\n  attachments: [],\n  comments: [],\n  description: '',\n  due: [null, null],\n  assignee: [],\n};\n\ntype Props = {\n  onAddTask: (task: KanbanCard) => void;\n  onCloseAddTask: VoidFunction;\n};\n\nexport default function KanbanTaskAdd({ onAddTask, onCloseAddTask }: Props) {\n  const [name, setName] = useState('');\n  const [completed, setCompleted] = useState(false);\n  const {\n    dueDate,\n    startTime,\n    endTime,\n    isSameDays,\n    isSameMonths,\n    onChangeDueDate,\n    openPicker,\n    onOpenPicker,\n    onClosePicker,\n  } = useDatePicker({\n    date: [null, null],\n  });\n\n  const handleKeyUpAddTask = (event: KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter') {\n      if (trim(name) !== '') {\n        onAddTask({ ...defaultTask, id: uuidv4(), name, due: dueDate, completed });\n      }\n    }\n  };\n\n  const handleClickAddTask = () => {\n    if (name) {\n      onAddTask({ ...defaultTask, id: uuidv4(), name, due: dueDate, completed });\n    }\n    onCloseAddTask();\n  };\n\n  const handleChangeCompleted = (event: ChangeEvent<HTMLInputElement>) => {\n    setCompleted(event.target.checked);\n  };\n\n  return (\n    <>\n      <ClickAwayListener onClickAway={handleClickAddTask}>\n        <Paper variant=\"outlined\" sx={{ p: 2 }}>\n          <OutlinedInput\n            multiline\n            size=\"small\"\n            placeholder=\"Task name\"\n            value={name}\n            onChange={(event) => setName(event.target.value)}\n            onKeyUp={handleKeyUpAddTask}\n            sx={{\n              '& input': { p: 0 },\n              '& fieldset': { borderColor: 'transparent !important' },\n            }}\n          />\n\n          <Stack direction=\"row\" justifyContent=\"space-between\">\n            <Tooltip title=\"Mark task complete\">\n              <Checkbox\n                disableRipple\n                checked={completed}\n                onChange={handleChangeCompleted}\n                icon={<Iconify icon={'eva:radio-button-off-outline'} />}\n                checkedIcon={<Iconify icon={'eva:checkmark-circle-2-outline'} />}\n              />\n            </Tooltip>\n\n            <Stack direction=\"row\" spacing={1.5} alignItems=\"center\">\n              <Tooltip title=\"Assign this task\">\n                <IconButton size=\"small\">\n                  <Iconify icon={'eva:people-fill'} width={20} height={20} />\n                </IconButton>\n              </Tooltip>\n\n              {startTime && endTime ? (\n                <DisplayTime\n                  startTime={startTime}\n                  endTime={endTime}\n                  isSameDays={isSameDays}\n                  isSameMonths={isSameMonths}\n                  onOpenPicker={onOpenPicker}\n                />\n              ) : (\n                <Tooltip title=\"Add due date\">\n                  <IconButton size=\"small\" onClick={onOpenPicker}>\n                    <Iconify icon={'eva:calendar-fill'} width={20} height={20} />\n                  </IconButton>\n                </Tooltip>\n              )}\n\n              <MobileDateRangePicker\n                open={openPicker}\n                onClose={onClosePicker}\n                onOpen={onOpenPicker}\n                value={dueDate}\n                onChange={onChangeDueDate}\n                // @ts-ignore\n                renderInput={() => {}}\n              />\n            </Stack>\n          </Stack>\n        </Paper>\n      </ClickAwayListener>\n    </>\n  );\n}\n\n// ----------------------------------------------------------------------\n\ntype DateRange = [number | null, number | null];\n\nexport function useDatePicker({ date }: { date: DateRange }) {\n  const [dueDate, setDueDate] = useState<DateRange>([date[0], date[1]]);\n  const [openPicker, setOpenPicker] = useState(false);\n\n  const startTime = dueDate[0] || '';\n  const endTime = dueDate[1] || '';\n\n  const isSameDays = isSameDay(new Date(startTime), new Date(endTime));\n  const isSameMonths = isSameMonth(new Date(startTime), new Date(endTime));\n\n  const handleChangeDueDate = (newValue: DateRange) => {\n    setDueDate(newValue);\n  };\n\n  const handleOpenPicker = () => {\n    setOpenPicker(true);\n  };\n\n  const handleClosePicker = () => {\n    setOpenPicker(false);\n  };\n\n  return {\n    dueDate,\n    startTime,\n    endTime,\n    isSameDays,\n    isSameMonths,\n    onChangeDueDate: handleChangeDueDate,\n    openPicker,\n    onOpenPicker: handleOpenPicker,\n    onClosePicker: handleClosePicker,\n  };\n}\n\ntype DisplayTimeProps = {\n  startTime: number | string;\n  endTime: number | string;\n  isSameDays: boolean;\n  isSameMonths: boolean;\n  onOpenPicker: VoidFunction;\n  sx?: SxProps;\n};\n\nexport function DisplayTime({\n  startTime,\n  endTime,\n  isSameDays,\n  isSameMonths,\n  onOpenPicker,\n  sx,\n}: DisplayTimeProps) {\n  const style = {\n    typography: 'caption',\n    cursor: 'pointer',\n    '&:hover': { opacity: 0.72 },\n  };\n\n  if (isSameMonths) {\n    return (\n      <Box onClick={onOpenPicker} sx={{ ...style, ...sx }}>\n        {isSameDays\n          ? format(new Date(endTime), 'dd MMM')\n          : `${format(new Date(startTime), 'dd')} - ${format(new Date(endTime), 'dd MMM')}`}\n      </Box>\n    );\n  }\n  return (\n    <Box onClick={onOpenPicker} sx={{ ...style, ...sx }}>\n      {format(new Date(startTime), 'dd MMM')} - {format(new Date(endTime), 'dd MMM')}\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}