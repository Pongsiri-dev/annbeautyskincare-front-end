{"ast":null,"code":"var _jsxFileName = \"/Users/pongsiri.an/Documents/GitHub/Valenta-front-end/src/sections/@dashboard/chat/ChatMessageList.tsx\",\n    _s = $RefreshSig$();\n\nimport { findIndex } from 'lodash';\nimport { useEffect, useState, useRef } from 'react'; // @types\n\n//\nimport Scrollbar from '../../../components/Scrollbar';\nimport LightboxModal from '../../../components/LightboxModal';\nimport ChatMessageItem from './ChatMessageItem'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ChatMessageList(_ref) {\n  _s();\n\n  let {\n    conversation\n  } = _ref;\n  const scrollRef = useRef(null);\n  const [openLightbox, setOpenLightbox] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(0);\n  useEffect(() => {\n    const scrollMessagesToBottom = () => {\n      if (scrollRef.current) {\n        scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n      }\n    };\n\n    scrollMessagesToBottom();\n  }, [conversation.messages]);\n  const imagesLightbox = conversation.messages.filter(messages => messages.contentType === 'image').map(messages => messages.body);\n\n  const handleOpenLightbox = url => {\n    const selectedImage = findIndex(imagesLightbox, index => index === url);\n    setOpenLightbox(true);\n    setSelectedImage(selectedImage);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Scrollbar, {\n      scrollableNodeProps: {\n        ref: scrollRef\n      },\n      sx: {\n        p: 3,\n        height: 1\n      },\n      children: conversation.messages.map(message => /*#__PURE__*/_jsxDEV(ChatMessageItem, {\n        message: message,\n        conversation: conversation,\n        onOpenLightbox: handleOpenLightbox\n      }, message.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LightboxModal, {\n      images: imagesLightbox,\n      mainSrc: imagesLightbox[selectedImage],\n      photoIndex: selectedImage,\n      setPhotoIndex: setSelectedImage,\n      isOpen: openLightbox,\n      onCloseRequest: () => setOpenLightbox(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ChatMessageList, \"mBZeTLyYgKbpPVg0bQiMJqUJp3s=\");\n\n_c = ChatMessageList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatMessageList\");","map":{"version":3,"sources":["/Users/pongsiri.an/Documents/GitHub/Valenta-front-end/src/sections/@dashboard/chat/ChatMessageList.tsx"],"names":["findIndex","useEffect","useState","useRef","Scrollbar","LightboxModal","ChatMessageItem","ChatMessageList","conversation","scrollRef","openLightbox","setOpenLightbox","selectedImage","setSelectedImage","scrollMessagesToBottom","current","scrollTop","scrollHeight","messages","imagesLightbox","filter","contentType","map","body","handleOpenLightbox","url","index","ref","p","height","message","id"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,QAA1B;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,OAA5C,C,CACA;;AAEA;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,aAAP,MAA0B,mCAA1B;AACA,OAAOC,eAAP,MAA4B,mBAA5B,C,CAEA;;;;AAMA,eAAe,SAASC,eAAT,OAAkD;AAAA;;AAAA,MAAzB;AAAEC,IAAAA;AAAF,GAAyB;AAC/D,QAAMC,SAAS,GAAGN,MAAM,CAAiB,IAAjB,CAAxB;AAEA,QAAM,CAACO,YAAD,EAAeC,eAAf,IAAkCT,QAAQ,CAAC,KAAD,CAAhD;AAEA,QAAM,CAACU,aAAD,EAAgBC,gBAAhB,IAAoCX,QAAQ,CAAS,CAAT,CAAlD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMa,sBAAsB,GAAG,MAAM;AACnC,UAAIL,SAAS,CAACM,OAAd,EAAuB;AACrBN,QAAAA,SAAS,CAACM,OAAV,CAAkBC,SAAlB,GAA8BP,SAAS,CAACM,OAAV,CAAkBE,YAAhD;AACD;AACF,KAJD;;AAKAH,IAAAA,sBAAsB;AACvB,GAPQ,EAON,CAACN,YAAY,CAACU,QAAd,CAPM,CAAT;AASA,QAAMC,cAAc,GAAGX,YAAY,CAACU,QAAb,CACpBE,MADoB,CACZF,QAAD,IAAcA,QAAQ,CAACG,WAAT,KAAyB,OAD1B,EAEpBC,GAFoB,CAEfJ,QAAD,IAAcA,QAAQ,CAACK,IAFP,CAAvB;;AAIA,QAAMC,kBAAkB,GAAIC,GAAD,IAAiB;AAC1C,UAAMb,aAAa,GAAGZ,SAAS,CAACmB,cAAD,EAAkBO,KAAD,IAAWA,KAAK,KAAKD,GAAtC,CAA/B;AACAd,IAAAA,eAAe,CAAC,IAAD,CAAf;AACAE,IAAAA,gBAAgB,CAACD,aAAD,CAAhB;AACD,GAJD;;AAMA,sBACE;AAAA,4BACE,QAAC,SAAD;AAAW,MAAA,mBAAmB,EAAE;AAAEe,QAAAA,GAAG,EAAElB;AAAP,OAAhC;AAAoD,MAAA,EAAE,EAAE;AAAEmB,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,MAAM,EAAE;AAAhB,OAAxD;AAAA,gBACGrB,YAAY,CAACU,QAAb,CAAsBI,GAAtB,CAA2BQ,OAAD,iBACzB,QAAC,eAAD;AAEE,QAAA,OAAO,EAAEA,OAFX;AAGE,QAAA,YAAY,EAAEtB,YAHhB;AAIE,QAAA,cAAc,EAAEgB;AAJlB,SACOM,OAAO,CAACC,EADf;AAAA;AAAA;AAAA;AAAA,cADD;AADH;AAAA;AAAA;AAAA;AAAA,YADF,eAYE,QAAC,aAAD;AACE,MAAA,MAAM,EAAEZ,cADV;AAEE,MAAA,OAAO,EAAEA,cAAc,CAACP,aAAD,CAFzB;AAGE,MAAA,UAAU,EAAEA,aAHd;AAIE,MAAA,aAAa,EAAEC,gBAJjB;AAKE,MAAA,MAAM,EAAEH,YALV;AAME,MAAA,cAAc,EAAE,MAAMC,eAAe,CAAC,KAAD;AANvC;AAAA;AAAA;AAAA;AAAA,YAZF;AAAA,kBADF;AAuBD;;GAjDuBJ,e;;KAAAA,e","sourcesContent":["import { findIndex } from 'lodash';\nimport { useEffect, useState, useRef } from 'react';\n// @types\nimport { Conversation } from '../../../@types/chat';\n//\nimport Scrollbar from '../../../components/Scrollbar';\nimport LightboxModal from '../../../components/LightboxModal';\nimport ChatMessageItem from './ChatMessageItem';\n\n// ----------------------------------------------------------------------\n\ntype Props = {\n  conversation: Conversation;\n};\n\nexport default function ChatMessageList({ conversation }: Props) {\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  const [openLightbox, setOpenLightbox] = useState(false);\n\n  const [selectedImage, setSelectedImage] = useState<number>(0);\n\n  useEffect(() => {\n    const scrollMessagesToBottom = () => {\n      if (scrollRef.current) {\n        scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n      }\n    };\n    scrollMessagesToBottom();\n  }, [conversation.messages]);\n\n  const imagesLightbox = conversation.messages\n    .filter((messages) => messages.contentType === 'image')\n    .map((messages) => messages.body);\n\n  const handleOpenLightbox = (url: string) => {\n    const selectedImage = findIndex(imagesLightbox, (index) => index === url);\n    setOpenLightbox(true);\n    setSelectedImage(selectedImage);\n  };\n\n  return (\n    <>\n      <Scrollbar scrollableNodeProps={{ ref: scrollRef }} sx={{ p: 3, height: 1 }}>\n        {conversation.messages.map((message) => (\n          <ChatMessageItem\n            key={message.id}\n            message={message}\n            conversation={conversation}\n            onOpenLightbox={handleOpenLightbox}\n          />\n        ))}\n      </Scrollbar>\n\n      <LightboxModal\n        images={imagesLightbox}\n        mainSrc={imagesLightbox[selectedImage]}\n        photoIndex={selectedImage}\n        setPhotoIndex={setSelectedImage}\n        isOpen={openLightbox}\n        onCloseRequest={() => setOpenLightbox(false)}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}