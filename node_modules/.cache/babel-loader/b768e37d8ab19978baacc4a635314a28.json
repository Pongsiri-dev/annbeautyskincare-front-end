{"ast":null,"code":"var _jsxFileName = \"/Users/pongsiri.an/Downloads/Theme/Minimal_TypeScript_v2.7.0/full_version_TS/src/sections/@dashboard/calendar/CalendarForm.tsx\";\nimport * as Yup from 'yup';\nimport merge from 'lodash/merge';\nimport { isBefore } from 'date-fns';\nimport isEmpty from 'lodash/isEmpty';\nimport { useSnackbar } from 'notistack';\nimport { useFormik, Form, FormikProvider } from 'formik';\nimport { Box, Button, Switch, Tooltip, TextField, IconButton, DialogContent, DialogActions, FormControlLabel } from '@mui/material';\nimport { LoadingButton, MobileDateTimePicker } from '@mui/lab'; // redux\n\nimport { useDispatch } from '../../../redux/store';\nimport { createEvent, updateEvent, deleteEvent } from '../../../redux/slices/calendar'; // hooks\n\nimport useIsMountedRef from '../../../hooks/useIsMountedRef'; // components\n\nimport Iconify from '../../../components/Iconify';\nimport ColorSinglePicker from '../../../components/ColorSinglePicker'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COLOR_OPTIONS = ['#00AB55', // theme.palette.primary.main,\n'#1890FF', // theme.palette.info.main,\n'#94D82D', // theme.palette.success.main,\n'#FFC107', // theme.palette.warning.main,\n'#FF4842', // theme.palette.error.main\n'#04297A', // theme.palette.info.darker\n'#7A0C2E' // theme.palette.error.darker\n];\n\nconst getInitialValues = (event, range) => {\n  // eslint-disable-next-line no-underscore-dangle\n  const _event = {\n    title: '',\n    description: '',\n    textColor: '#1890FF',\n    allDay: false,\n    start: range ? new Date(range.start) : new Date(),\n    end: range ? new Date(range.end) : new Date()\n  };\n\n  if (event || range) {\n    return merge({}, _event, event);\n  }\n\n  return _event;\n}; // ----------------------------------------------------------------------\n\n\nexport default function CalendarForm(_ref) {\n  let {\n    event,\n    range,\n    onCancel\n  } = _ref;\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const dispatch = useDispatch();\n  const isMountedRef = useIsMountedRef();\n  const isCreating = isEmpty(event);\n  const EventSchema = Yup.object().shape({\n    title: Yup.string().max(255).required('Title is required'),\n    description: Yup.string().max(5000)\n  });\n  const formik = useFormik({\n    initialValues: getInitialValues(event, range),\n    validationSchema: EventSchema,\n    onSubmit: async (values, _ref2) => {\n      let {\n        resetForm,\n        setSubmitting\n      } = _ref2;\n\n      try {\n        const newEvent = {\n          title: values.title,\n          description: values.description,\n          textColor: values.textColor,\n          allDay: values.allDay,\n          start: values.start,\n          end: values.end\n        };\n\n        if (event.id) {\n          dispatch(updateEvent(event.id, newEvent));\n          enqueueSnackbar('Update event success', {\n            variant: 'success'\n          });\n        } else {\n          dispatch(createEvent(newEvent));\n          enqueueSnackbar('Create event success', {\n            variant: 'success'\n          });\n        }\n\n        onCancel();\n\n        if (isMountedRef.current) {\n          resetForm();\n          setSubmitting(false);\n        }\n      } catch (error) {\n        console.error(error);\n\n        if (isMountedRef.current) {\n          setSubmitting(false);\n        }\n      }\n    }\n  });\n  const {\n    values,\n    errors,\n    touched,\n    handleSubmit,\n    isSubmitting,\n    getFieldProps,\n    setFieldValue\n  } = formik;\n\n  const handleDelete = async () => {\n    if (!event.id) return;\n\n    try {\n      onCancel();\n      dispatch(deleteEvent(event.id));\n      enqueueSnackbar('Delete event success', {\n        variant: 'success'\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const isDateError = isBefore(new Date(values.end), new Date(values.start));\n  return /*#__PURE__*/_jsxDEV(FormikProvider, {\n    value: formik,\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      autoComplete: \"off\",\n      noValidate: true,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(DialogContent, {\n        sx: {\n          pb: 0,\n          overflowY: 'unset'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Title\",\n          ...getFieldProps('title'),\n          error: Boolean(touched.title && errors.title),\n          helperText: touched.title && errors.title,\n          sx: {\n            mb: 3\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          multiline: true,\n          maxRows: 4,\n          label: \"Description\",\n          ...getFieldProps('description'),\n          error: Boolean(touched.description && errors.description),\n          helperText: touched.description && errors.description,\n          sx: {\n            mb: 3\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n          control: /*#__PURE__*/_jsxDEV(Switch, {\n            checked: values.allDay,\n            ...getFieldProps('allDay')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 22\n          }, this),\n          label: \"All day\",\n          sx: {\n            mb: 3\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MobileDateTimePicker, {\n          label: \"Start date\",\n          value: values.start,\n          inputFormat: \"dd/MM/yyyy hh:mm a\",\n          onChange: date => setFieldValue('start', date),\n          renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n            fullWidth: true,\n            sx: {\n              mb: 3\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 38\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MobileDateTimePicker, {\n          label: \"End date\",\n          value: values.end,\n          inputFormat: \"dd/MM/yyyy hh:mm a\",\n          onChange: date => setFieldValue('end', date),\n          renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n            fullWidth: true,\n            error: Boolean(isDateError),\n            helperText: isDateError && 'End date must be later than start date',\n            sx: {\n              mb: 3\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ColorSinglePicker, { ...getFieldProps('textColor'),\n          colors: COLOR_OPTIONS\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [!isCreating && /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Delete Event\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: handleDelete,\n            children: /*#__PURE__*/_jsxDEV(Iconify, {\n              icon: \"eva:trash-2-outline\",\n              width: 20,\n              height: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flexGrow: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          variant: \"outlined\",\n          color: \"inherit\",\n          onClick: onCancel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LoadingButton, {\n          type: \"submit\",\n          variant: \"contained\",\n          loading: isSubmitting,\n          loadingIndicator: \"Loading...\",\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/pongsiri.an/Downloads/Theme/Minimal_TypeScript_v2.7.0/full_version_TS/src/sections/@dashboard/calendar/CalendarForm.tsx"],"names":["Yup","merge","isBefore","isEmpty","useSnackbar","useFormik","Form","FormikProvider","Box","Button","Switch","Tooltip","TextField","IconButton","DialogContent","DialogActions","FormControlLabel","LoadingButton","MobileDateTimePicker","useDispatch","createEvent","updateEvent","deleteEvent","useIsMountedRef","Iconify","ColorSinglePicker","COLOR_OPTIONS","getInitialValues","event","range","_event","title","description","textColor","allDay","start","Date","end","CalendarForm","onCancel","enqueueSnackbar","dispatch","isMountedRef","isCreating","EventSchema","object","shape","string","max","required","formik","initialValues","validationSchema","onSubmit","values","resetForm","setSubmitting","newEvent","id","variant","current","error","console","errors","touched","handleSubmit","isSubmitting","getFieldProps","setFieldValue","handleDelete","isDateError","pb","overflowY","Boolean","mb","date","params","flexGrow"],"mappings":"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","sourcesContent":["import * as Yup from 'yup';\nimport merge from 'lodash/merge';\nimport { isBefore } from 'date-fns';\nimport isEmpty from 'lodash/isEmpty';\nimport { useSnackbar } from 'notistack';\nimport { EventInput } from '@fullcalendar/common';\nimport { useFormik, Form, FormikProvider } from 'formik';\nimport {\n  Box,\n  Button,\n  Switch,\n  Tooltip,\n  TextField,\n  IconButton,\n  DialogContent,\n  DialogActions,\n  FormControlLabel,\n} from '@mui/material';\nimport { LoadingButton, MobileDateTimePicker } from '@mui/lab';\n// redux\nimport { useDispatch } from '../../../redux/store';\nimport { createEvent, updateEvent, deleteEvent } from '../../../redux/slices/calendar';\n// hooks\nimport useIsMountedRef from '../../../hooks/useIsMountedRef';\n// components\nimport Iconify from '../../../components/Iconify';\nimport ColorSinglePicker from '../../../components/ColorSinglePicker';\n\n// ----------------------------------------------------------------------\n\nconst COLOR_OPTIONS = [\n  '#00AB55', // theme.palette.primary.main,\n  '#1890FF', // theme.palette.info.main,\n  '#94D82D', // theme.palette.success.main,\n  '#FFC107', // theme.palette.warning.main,\n  '#FF4842', // theme.palette.error.main\n  '#04297A', // theme.palette.info.darker\n  '#7A0C2E', // theme.palette.error.darker\n];\n\nconst getInitialValues = (event: EventInput, range: { start: Date; end: Date } | null) => {\n  // eslint-disable-next-line no-underscore-dangle\n  const _event = {\n    title: '',\n    description: '',\n    textColor: '#1890FF',\n    allDay: false,\n    start: range ? new Date(range.start) : new Date(),\n    end: range ? new Date(range.end) : new Date(),\n  };\n\n  if (event || range) {\n    return merge({}, _event, event);\n  }\n\n  return _event;\n};\n\n// ----------------------------------------------------------------------\n\ntype Props = {\n  event: EventInput;\n  range: {\n    start: Date;\n    end: Date;\n  } | null;\n  onCancel: VoidFunction;\n};\n\nexport default function CalendarForm({ event, range, onCancel }: Props) {\n  const { enqueueSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n  const isMountedRef = useIsMountedRef();\n\n  const isCreating = isEmpty(event);\n\n  const EventSchema = Yup.object().shape({\n    title: Yup.string().max(255).required('Title is required'),\n    description: Yup.string().max(5000),\n  });\n\n  const formik = useFormik({\n    initialValues: getInitialValues(event, range),\n    validationSchema: EventSchema,\n    onSubmit: async (values, { resetForm, setSubmitting }) => {\n      try {\n        const newEvent = {\n          title: values.title,\n          description: values.description,\n          textColor: values.textColor,\n          allDay: values.allDay,\n          start: values.start,\n          end: values.end,\n        };\n        if (event.id) {\n          dispatch(updateEvent(event.id, newEvent));\n          enqueueSnackbar('Update event success', { variant: 'success' });\n        } else {\n          dispatch(createEvent(newEvent));\n          enqueueSnackbar('Create event success', { variant: 'success' });\n        }\n        onCancel();\n        if (isMountedRef.current) {\n          resetForm();\n          setSubmitting(false);\n        }\n      } catch (error) {\n        console.error(error);\n        if (isMountedRef.current) {\n          setSubmitting(false);\n        }\n      }\n    },\n  });\n\n  const { values, errors, touched, handleSubmit, isSubmitting, getFieldProps, setFieldValue } =\n    formik;\n\n  const handleDelete = async () => {\n    if (!event.id) return;\n    try {\n      onCancel();\n      dispatch(deleteEvent(event.id));\n      enqueueSnackbar('Delete event success', { variant: 'success' });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const isDateError = isBefore(new Date(values.end), new Date(values.start));\n\n  return (\n    <FormikProvider value={formik}>\n      <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit}>\n        <DialogContent sx={{ pb: 0, overflowY: 'unset' }}>\n          <TextField\n            fullWidth\n            label=\"Title\"\n            {...getFieldProps('title')}\n            error={Boolean(touched.title && errors.title)}\n            helperText={touched.title && errors.title}\n            sx={{ mb: 3 }}\n          />\n\n          <TextField\n            fullWidth\n            multiline\n            maxRows={4}\n            label=\"Description\"\n            {...getFieldProps('description')}\n            error={Boolean(touched.description && errors.description)}\n            helperText={touched.description && errors.description}\n            sx={{ mb: 3 }}\n          />\n\n          <FormControlLabel\n            control={<Switch checked={values.allDay} {...getFieldProps('allDay')} />}\n            label=\"All day\"\n            sx={{ mb: 3 }}\n          />\n\n          <MobileDateTimePicker\n            label=\"Start date\"\n            value={values.start}\n            inputFormat=\"dd/MM/yyyy hh:mm a\"\n            onChange={(date) => setFieldValue('start', date)}\n            renderInput={(params) => <TextField {...params} fullWidth sx={{ mb: 3 }} />}\n          />\n\n          <MobileDateTimePicker\n            label=\"End date\"\n            value={values.end}\n            inputFormat=\"dd/MM/yyyy hh:mm a\"\n            onChange={(date) => setFieldValue('end', date)}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                fullWidth\n                error={Boolean(isDateError)}\n                helperText={isDateError && 'End date must be later than start date'}\n                sx={{ mb: 3 }}\n              />\n            )}\n          />\n\n          <ColorSinglePicker {...getFieldProps('textColor')} colors={COLOR_OPTIONS} />\n        </DialogContent>\n\n        <DialogActions>\n          {!isCreating && (\n            <Tooltip title=\"Delete Event\">\n              <IconButton onClick={handleDelete}>\n                <Iconify icon=\"eva:trash-2-outline\" width={20} height={20} />\n              </IconButton>\n            </Tooltip>\n          )}\n          <Box sx={{ flexGrow: 1 }} />\n          <Button type=\"button\" variant=\"outlined\" color=\"inherit\" onClick={onCancel}>\n            Cancel\n          </Button>\n          <LoadingButton\n            type=\"submit\"\n            variant=\"contained\"\n            loading={isSubmitting}\n            loadingIndicator=\"Loading...\"\n          >\n            Add\n          </LoadingButton>\n        </DialogActions>\n      </Form>\n    </FormikProvider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}